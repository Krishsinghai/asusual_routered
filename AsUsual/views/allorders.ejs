<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Orders</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
  <link rel="stylesheet" href="styles/styles.css">
  <link rel="stylesheet" href="styles/footer.css">
  <link rel="stylesheet" href="styles/navbar.css">
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
/>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            900: '#0a0a0a',
                            800: '#1a1a1a',
                            700: '#2a2a2a',
                        },
                        red: {
                            primary: '#ef4444',
                            dark: '#dc2626'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-dark-900 text-gray-200 min-h-screen">
  <div class="notification-bar">
    <span class="notification-text"> </span>
  </div>
  <!-- this is the responsive navbar -->
  <nav class="As-navbar">
    <div class="As-container">
      <ul class="As-nav-links">
        <li>
          <a href="/"><i class="fas fa-home"></i> <span>Home</span></a>
        </li>
        <li>
          <a href="/about"
            ><i class="fas fa-info-circle"></i> <span>About Us</span></a
          >
        </li>
        <li>
          <a href="/Products"
            ><i class="fas fa-box"></i> <span>All Products</span></a
          >
        </li>
        <li>
          <a href="/contact"
            ><i class="fas fa-phone"></i><span>Contact us</span></a
          >
        </li>
      </ul>
      <div class="As-logo">
        <a href="/"
          ><img
            src="assests/horizontalLogo-removebg-preview.png"
            alt="Logo"
        /></a>
      </div>
      <div class="AS-nav-btn">
        <% if (user) { %>
        <li>
          <a href="/cart"
            ><i class="fas fa-shopping-cart"></i> <span>Cart</span></a
          >
        </li>
        <li>
          <a href="/all-orders"
            ><i class="fa fa-tshirt"></i><span>Your Orders</span></a
          >
        </li>
        <!-- Dropdown for logged-in users -->
        <!-- Profile Dropdown -->
        <div class="profile-dropdown">
          <div class="profile-trigger">
            <li>
              <a href="#"
                ><i class="fas fa-user-circle"></i><span>Profile</span></a
              >
            </li>
          </div>
          <div class="profile-details">
            <p><i class="fas fa-user"></i> Name: <%= user.name %></p>
            <p><i class="fas fa-envelope"></i> Email: <%= user.email %></p>
            <p>
              <i class="fas fa-phone"></i> Phone: <%= user.phone || 'N/A' %>
            </p>
            <p>
              <i class="fas fa-calendar"></i> Member Since: <%=
              user.createdAt ? new Date(user.createdAt).toDateString() :
              'N/A' %>
            </p>
          </div>
        </div>
        <li>
          <a href="/logout"
            ><i class="fas fa-sign-out-alt"></i><span>Logout</span>
          </a>
        </li>

        <% } else { %>
        <!-- Sign-up link for guests -->
        <li>
          <a href="/signup"
            ><i class="fas fa-user-plus"></i> <span>Sign-Up</span></a
          >
        </li>
        <% } %>
      </div>

      <div class="As-hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>


    <main class="orders-section p-6 max-w-6xl mx-auto">
        <% if (orders.length === 0) { %>
            <div class="bg-dark-800 rounded-lg p-8 text-center">
                <p class="text-lg">You have no orders yet.</p>
                <a href="/products" class="mt-4 inline-block bg-red-primary hover:bg-red-dark text-white font-medium py-2 px-6 rounded-md transition">Start Shopping</a>
            </div>
        <% } else { %>
            <div class="space-y-6">
                <% orders.forEach(order => { %>
                    <div class="order-card bg-dark-800 rounded-lg overflow-hidden shadow-lg border border-dark-700">
                        <div class="p-5 border-b border-dark-700">
                            <div class="flex justify-between items-start flex-wrap gap-4">
                                <div>
                                    <h3 class="text-xl font-semibold">Order #: <span class="text-red-primary"><%= order._id %></span></h3>
                                    <p class="mt-1"><span class="font-medium">Status:</span> 
                                        <span class="<%=
                                            order.status === 'completed' ? 'text-green-400' :
                                            order.status === 'processing' ? 'text-yellow-400' :
                                            order.status === 'cancelled' ? 'text-gray-400' :
                                            'text-red-primary'
                                        %>">
                                            <%= order.status %>
                                        </span>
                                    </p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-400">Order Date: <%= new Date(order.createdAt).toLocaleString() %></p>
                                    <p class="mt-2 text-lg font-bold">Total: <span class="text-red-primary">₹<%= order.totalAmount.toFixed(2) %></span></p>
                                </div>
                            </div>
                        </div>

                        <div class="order-items p-5">
                          <h4 class="font-medium mb-4 text-lg border-b border-dark-700 pb-2">Items</h4>
                          <div class="space-y-4">
                              <% order.items.forEach(item => { %>
                                  <div class="order-item flex gap-4 p-3 bg-dark-700 rounded-lg">
                                      <% if (item.product) { %>
                                          <img src="<%= item.product.images[0] %>" alt="<%= item.product.name %>" class="w-16 h-16 object-cover rounded-md" />
                                      <% } else { %>
                                          <div class="w-16 h-16 bg-dark-600 rounded-md flex items-center justify-center">
                                              <i class="fas fa-box-open text-gray-500"></i>
                                          </div>
                                      <% } %>
                                      <div class="item-details flex-1">
                                          <p class="font-bold">
                                              <%= item.product ? item.product.name : 'Item not found' %>
                                          </p>
                                          <div class="grid grid-cols-2 md:grid-cols-3 gap-2 mt-2 text-sm">
                                              <p><span class="text-gray-400">Size:</span> <%= item.size %></p>
                                              <p><span class="text-gray-400">Qty:</span> <%= item.quantity %></p>
                                              <p><span class="text-gray-400">Price:</span> ₹<%= item.priceAtPurchase.toFixed(2) %></p>
                                          </div>
                                      </div>
                                  </div>
                              <% }) %>
                          </div>
                      </div>
                      
                        <div class="p-5 border-t border-dark-700 flex justify-end">
                            <a href="/user-orders/<%= order._id %>" class="bg-dark-700 hover:bg-dark-600 text-red-primary font-medium py-2 px-6 rounded-md transition border border-dark-600 hover:border-red-primary">
                                View Details
                            </a>
                        </div>
                    </div>
                <% }) %>
            </div>
        <% } %>
    </main>
    
      <!-- footer  -->
      <footer class="footer">
        <div class="footer__parralax">
          <div class="footer__parralax-trees"></div>
          <div class="footer__parralax-moto"></div>
          <div class="footer__parralax-secondplan"></div>
          <div class="footer__parralax-premierplan"></div>
          <div class="footer__parralax-voiture"></div>
        </div>
        <div class="containerF">
          <div class="footer__columns">
            <div class="footer__col">
              <h3 class="footer__col-title">
                <i data-feather="shopping-bag"></i> <span>About</span>
              </h3>
              <nav class="footer__nav">
                <ul class="footer__nav-list">
                  <li class="footer__nav-item">
                    <a href="/about"> About Us </a>
                  </li>
                  <li class="footer__nav-item">
                    <a href="/contact"> Contact Us </a>
                  </li>
                  <li class="footer__nav-item">
                    <a href="/terms-and-condition"> Terms & Conditions </a>
                  </li>
                  <li class="footer__nav-item">
                    <a href="/privacy_policy"> Privacy Policy </a>
                  </li>
                </ul>
              </nav>
            </div>
            <div class="footer__col">
              <h3 class="footer__col-title">
                <i data-feather="share-2"></i> <span>Find Us</span>
              </h3>
              <nav class="footer__nav">
                <ul class="footer__nav-list">
                  <li class="footer__nav-item">
                    <a href class="footer__nav-link">
                      <i data-feather="youtube"></i><span>Youtube</span>
                    </a>
                  </li>
                  <li class="footer__nav-item">
                    <a href class="footer__nav-link">
                      <i data-feather="facebook"></i><span>Facebook</span>
                    </a>
                  </li>
                  <li class="footer__nav-item">
                    <a
                      href="https://www.instagram.com/as_usual.clothing/"
                      class="footer__nav-link"
                    >
                      <i
                        data-feather="https://www.instagram.com/as_usual.clothing/"
                      ></i
                      ><span>Instagram</span>
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
            <div class="footer__col">
              <h3 class="footer__col-title">
                <i data-feather="send"></i> <span>Contact us</span>
              </h3>
              <nav class="footer__nav">
                <ul class="footer__nav-list">
                  <li class="footer__nav-item">
                    <a
                      href="mailto:contact.laboiserie@gmail.com"
                      class="footer__nav-link"
                    >
                      asusualclothing@gmail.com
                    </a>
                  </li>
                </ul>
              </nav>
            </div>
          </div>
        </div>
      </footer>
</body>
</html>